# 发布订阅模式

```javascript
let EventEmitter=function(){
  this.events=[];

  this.on=function(name,callback){
    if(!this.events[name]){
      this.events[name]=[callback];
    }else{
      this.events[name].push(callback);
    }
  }

  this.emit=function(name){
    this.events[name] && this.events[name].forEach(cb=>cb());
  }

  this.remove=function(name,callback){
    if(this.events[name]){
      this.events[name]=this.events[name].filter(cb=>cb!=callback);
    }
  }

  this.once=function(name,callback){
    let fn=()=>{
      callback();
      this.removeListener(name,fn);
    }
    this.on(name,fn);
  }
}

let em=new EventEmitter();
```

