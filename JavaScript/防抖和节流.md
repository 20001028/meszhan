# 防抖和节流

### 引言

> + 要学会自己实现防抖和节流，深刻了解两者的使用场景
> + 谈到了防抖和节流，我们就不得不继续谈一下有关前端优化的部分，另开专题了解

### 防抖

> 在事件被触发n秒后执行回调，如果在n秒内被再次触发，n秒清零重新计时

```javascript
/*
    * 防抖
    * @params {Function} fn
    * @params {Number} delay
*/
const debounce=function(fn,delay){
    let timer=null;
    return function(){
        let that=this;
        if(timer){
            clearTimeout(timer);
        }
        timer=setTimeout(()=>{
            // 这里要改变this指向
            fn.call(that,...arguments);
        },delay);
    }
}

const callback=function(){
    console.log(this.name);
}

global.name='wax';

const fn=debounce(callback,1000);
console.log(global.name);
fn('zzg');
```

### 节流

> 在一个单位时间内，只能触发一次函数

```javascript
/*
    * 节流
    * @params {Function} fn
    * @params {Number} delay
*/
const throttle=function(fn,delay){
    let timer=null;
    return function(){
        if(timer)
            return;
        timer=setTimeout(()=>{
            fn(...arguments);
        },delay);
    };
};

const callback=function(num){
    console.log(num);
}

global.name='wax';

const fn=debounce(callback,1000);
fn(1);
fn(2);
fn(3);
```

### 应用场景

#### 防抖

> + 输入框搜索的联想功能，用户在输入值的时候，用防抖来节约请求，其实节流也是可以的
> + window触发resize时，不断调整浏览器窗口大小会不断触发resize事件

#### 节流

> + 鼠标不断点击触发，mousedown
> + 监听滚动事件































