# 数组扁平化

### 方法

+ reduce
+ 递归
+ toString
+ 扩展运算符

### 实现

> reduce

```javascript
const flat1=function(arr){
    return arr.reduce((source,item)=>{
        return source.concat(Array.isArray(item) ? flat1(item) : item);
    },[]);
};
```

> 递归

```javascript
const flat2=function(arr){
    let result=[];
    arr.forEach(item=>{
        if(Array.isArray(item)){
            result=result.concat(flat2(item));
            return;
        }
        result=result.concat([item]);
    });
    return result;
};
```

> toString

```javascript
const flat3=function(arr){
    return arr.toString().split(',').map(item=>+item);
}
```

> ...扩展运算符
>
> + 这里主要利用concat函数的特性，...arr会讲arr最外层展开
> + 例如，[1,2,[3,[4]]]，被展开为1,2,[3,[4]]，再使用concat函数因为会逐个进行连接，因此会得到[1,2,3,[4]]，起到展开内部数组的效果

```javascript
const flat4=function(arr){
    while(arr.some(item=>Array.isArray(item))){
        arr=[].concat(...arr);
        console.log(arr)
    }
    return arr;
};
```

### 测试代码

```javascript
const flat1=function(arr){
    return arr.reduce((source,item)=>{
        return source.concat(Array.isArray(item) ? flat1(item) : item);
    },[]);
};

const flat2=function(arr){
    let result=[];
    arr.forEach(item=>{
        if(Array.isArray(item)){
            result=result.concat(flat2(item));
            return;
        }
        result=result.concat([item]);
    });
    return result;
};

const flat3=function(arr){
    return arr.toString().split(',').map(item=>+item);
}

const flat4=function(arr){
    while(arr.some(item=>Array.isArray(item))){
        arr=[].concat(...arr);
        console.log(arr)
    }
    return arr;
};

const a=[1,[2,[3],5],4];
console.log(flat4(a));
```
