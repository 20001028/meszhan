# HTTP3

https://juejin.cn/post/6844904201588310029

### 回顾HTTP

在了解HTTP3之前，先回顾一下HTTP的发展史，这样我们才能发现HTTP3的进步

#### HTTP VS HTTP2

+ 多路复用：在多路复用时，多文件传输只需要建立一个TCP连接。

  在HTTP1协议中，每份资源的传输对应一个TCP连接，一般浏览器只会开启6个TCP连接来传输多路数据（因为我们知道每个TCP都会对应一个进程，进程开启过多十分影响内存），如果再增加新的TCP连接就会因为拥堵问题卡死，导致整个进程无法运行。

+ 头部压缩：采用HPACK做头部压缩

+ 服务端推送Server Push

+ 二进制传输：在解析上比基于文本的HTTP解析效率更高

#### HTTP3 VS HTTP2

+ HTTP3本质上不是对HTTP协议本身的改进，主要集中在任何提高传输效率

+ HTTP3使用Stream进一步扩展了HTTP2的多路复用

  在HTTP3模式下，一般传输多少个文件就会产生对应数量的stream，当这些文件中其中一个发生丢包时，只需要重传丢包文件的对应stream

+ HTTP3基于UDP建立，在如何保证传输可靠性上，UDP利用之上的QUIC协议提高连接建立速度，降低延迟

+ 引入Connection ID，使得HTTP3支持连接迁移和NAT的重绑定

+ HTTP3含有一个包括验证、加密、数据及负载的TLS安全机制

+ 拥塞控制：TCP在内核区实现，而HTTP3将拥塞控制移出了内核，通过用户空间实现。这样就不需要等待内核更新可以实现很方便的快速迭代

+ 头部压缩：更换了兼容HPACK的QPACK压缩方案，优化了对乱序发送到支持，优化了压缩率











































